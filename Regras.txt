
// Ponto de entrada
comeco              =: {PREPROCESSADOR}processar        //////////////////////////////////////////////////////////////////////////////////
                    | {QUALIFICADOR}declaracao_const    //////////////////////////////////////////////////////////////////////////////////
                    | {TIPO}declaracao_ou_funcao        //////////////////////////////////////////////////////////////////////////////////

// Preprocessador e bibliotecas 
processar =: {BIBLIOTECA}comeco | {IDENTIFICADOR}valor comeco   //////////////////////////////////////////////////////////////////////////


// Declaracao de constante 
declaracao_const    =: {TIPO}{IDENTIFICADOR}{ATRIBUICAO}valor{FIM_COMANDO}comeco    //////////////////////////////////////////////////////

// Valores
valor               =: {NUMERO}     //////////////////////////////////////////////////////////////////////////////////////////////////////
                    | {STRING}      //////////////////////////////////////////////////////////////////////////////////////////////////////
                    | {CARACTERE}   //////////////////////////////////////////////////////////////////////////////////////////////////////
                    | {IDENTIFICADOR}   //////////////////////////////////////////////////////////////////////////////////////////////////

// Declaracao ou funcao 
declaracao_ou_funcao =: {IDENTIFICADOR}apos_identificador   //////////////////////////////////////////////////////////////////////////////

apos_identificador  =: {PARENTESE_ABRE}parametros{PARENTESE_FECHA}corpo_funcao comeco   ///////////////////////////////////////////////   
                    | {COLCHETE_ABRE}{NUMERO}{COLCHETE_FECHA}inicializacao_array comeco //////////////////////////////////////////////////
                    | {FIM_COMANDO}comeco   //////////////////////////////////////////////////////////////////////////////////////////////
                    | inicializacao comeco  //////////////////////////////////////////////////////////////////////////////////////////////

// Inicializacao de variavel
inicializacao       =: {ATRIBUICAO}valor resto_declaracao   //////////////////////////////////////////////////////////////////////////////
                    | {SEPARADOR}{IDENTIFICADOR}inicializacao   //////////////////////////////////////////////////////////////////////////
                    | {FIM_COMANDO} //////////////////////////////////////////////////////////////////////////////////////////////////////

resto_declaracao    =: {FIM_COMANDO}    //////////////////////////////////////////////////////////////////////////////////////////////////
                    | {SEPARADOR}{IDENTIFICADOR}inicializacao   //////////////////////////////////////////////////////////////////////////
                    | {OPERADOR_REL}valor{FIM_COMANDO}  //////////////////////////////////////////////////////////////////////////////////
                    | {OPERADOR_MAT} valor resto_declaracao_mat //////////////////////////////////////////////////////////////////////////

resto_declaracao_mat    =: {FIM_COMANDO}    //////////////////////////////////////////////////////////////////////////////////////////////
                        |  {OPERADOR_MAT}valor resto_declaracao_mat //////////////////////////////////////////////////////////////////////
                        
// Inicializacao de array
inicializacao_array =: {ATRIBUICAO}{CHAVE_ABRE}lista_valores{CHAVE_FECHA}{FIM_COMANDO}  //////////////////////////////////////////////////
                    | {FIM_COMANDO} //////////////////////////////////////////////////////////////////////////////////////////////////////

lista_valores       =: valor resto_valores  //////////////////////////////////////////////////////////////////////////////////////////////

resto_valores       =: {SEPARADOR}valor resto_valores   ///////////////////////////////////////////////////////////////////////////////// 

// Parametros de funcao
parametros          =: {TIPO}lista_parametros   //////////////////////////////////////////////////////////////////////////////////////////

lista_parametros    =: {IDENTIFICADOR}resto_parametros  //////////////////////////////////////////////////////////////////////////////////

resto_parametros    =: {SEPARADOR}{TIPO}{IDENTIFICADOR}resto_parametros     //////////////////////////////////////////////////////////////

// Corpo de funcao
corpo_funcao        =: {CHAVE_ABRE}bloco_comandos{CHAVE_FECHA}   /////////////////////////////////////////////////////////////////////////

// Bloco de comandos
bloco_comandos      =: {TIPO}declaracao_local bloco_comandos_fim    //////////////////////////////////////////////////////////////////////
                    | {QUALIFICADOR}declaracao_const_local bloco_comandos_fim   //////////////////////////////////////////////////////////
                    | {IDENTIFICADOR}comando_identificador bloco_comandos_fim   //////////////////////////////////////////////////////////
                    | {IF}comando_if bloco_comandos_fim //////////////////////////////////////////////////////////////////////////////////
                    | {WHILE}comando_while bloco_comandos_fim   //////////////////////////////////////////////////////////////////////////
                    | {FOR}comando_for bloco_comandos_fim   //////////////////////////////////////////////////////////////////////////////
                    | {SWITCH}comando_switch bloco_comandos_fim //////////////////////////////////////////////////////////////////////////
                    | {RETURN}comando_return bloco_comandos_fim //////////////////////////////////////////////////////////////////////////
                    | {BREAK}{FIM_COMANDO}bloco_comandos_fim    //////////////////////////////////////////////////////////////////////////
                    | {CONTINUE}{FIM_COMANDO}bloco_comandos_fim //////////////////////////////////////////////////////////////////////////
                    | {PRINTF}chamada_printf bloco_comandos_fim //////////////////////////////////////////////////////////////////////////
                    | corpo_funcao  //////////////////////////////////////////////////////////////////////////////////////////////////////

bloco_comandos_fim  =: {CHAVE_FECHA} /////////////////////////////////////////////////////////////////////////////////////////////////////
                    | {TIPO}declaracao_local bloco_comandos_fim //////////////////////////////////////////////////////////////////////////
                    | {QUALIFICADOR}declaracao_const_local bloco_comandos_fim   //////////////////////////////////////////////////////////
                    | {IDENTIFICADOR}comando_identificador bloco_comandos_fim   //////////////////////////////////////////////////////////
                    | {IF}comando_if bloco_comandos_fim //////////////////////////////////////////////////////////////////////////////////
                    | {WHILE}comando_while bloco_comandos_fim   //////////////////////////////////////////////////////////////////////////
                    | {FOR}comando_for bloco_comandos_fim   //////////////////////////////////////////////////////////////////////////////
                    | {SWITCH}comando_switch bloco_comandos_fim //////////////////////////////////////////////////////////////////////////
                    | {RETURN}comando_return bloco_comandos_fim //////////////////////////////////////////////////////////////////////////
                    | {BREAK}{FIM_COMANDO}bloco_comandos_fim    //////////////////////////////////////////////////////////////////////////
                    | {CONTINUE}{FIM_COMANDO}bloco_comandos_fim //////////////////////////////////////////////////////////////////////////
                    | {PRINTF}chamada_printf bloco_comandos_fim //////////////////////////////////////////////////////////////////////////
                    | corpo_funcao

// Declaracao local dentro de funcao
declaracao_local    =: {IDENTIFICADOR}declaracao_local_resto    //////////////////////////////////////////////////////////////////////////

declaracao_local_resto =: {COLCHETE_ABRE}{NUMERO}{COLCHETE_FECHA}inicializacao_array    //////////////////////////////////////////////////
                       | inicializacao  //////////////////////////////////////////////////////////////////////////////////////////////////

declaracao_const_local =: {TIPO}{IDENTIFICADOR}{ATRIBUICAO}valor{FIM_COMANDO}   //////////////////////////////////////////////////////////

// Comando que come√ßa com identificador (atribuicao ou chamada)
comando_identificador =: {ATRIBUICAO}expressao{FIM_COMANDO} //////////////////////////////////////////////////////////////////////////////
                      | {COLCHETE_ABRE}{NUMERO}{COLCHETE_FECHA}{ATRIBUICAO}expressao{FIM_COMANDO}   //////////////////////////////////////
                      | {PARENTESE_ABRE}argumentos{PARENTESE_FECHA}{FIM_COMANDO}    //////////////////////////////////////////////////////

// Argumentos
argumentos          =: expressao resto_argumentos   //////////////////////////////////////////////////////////////////////////////////////
resto_argumentos    =: {SEPARADOR}expressao resto_argumentos    ///////////////////////////////////////////////////////////////////////   

// Expressoes
expressao           =: {NUMERO}expressao_rest   //////////////////////////////////////////////////////////////////////////////////////////
                    | {STRING}  //////////////////////////////////////////////////////////////////////////////////////////////////////////
                    | {CARACTERE}   //////////////////////////////////////////////////////////////////////////////////////////////////////
                    | {IDENTIFICADOR}expressao_id   //////////////////////////////////////////////////////////////////////////////////////
                    | {PARENTESE_ABRE}expressao{PARENTESE_FECHA}expressao_rest  //////////////////////////////////////////////////////////

expressao_id        =: {COLCHETE_ABRE}expressao{COLCHETE_FECHA}expressao_rest   //////////////////////////////////////////////////////////
                    | {PARENTESE_ABRE}argumentos expressao_rest //////////////////////////////////////////////////////////////////////////
                    | expressao_rest    //////////////////////////////////////////////////////////////////////////////////////////////////

expressao_rest      =: {OPERADOR_MAT}expressao  //////////////////////////////////////////////////////////////////////////////////////////

// Comandos de controle
comando_if          =: {PARENTESE_ABRE}condicao{PARENTESE_FECHA}{CHAVE_ABRE}comando{CHAVE_FECHA} comando_else   //////////////////////////

comando_else        =: {ELSE}comando_else_aux   //////////////////////////////////////////////////////////////////////////////////////////

comando_else_aux    =: {if}comando_if   //////////////////////////////////////////////////////////////////////////////////////////////////
                    | comando_else_fim  //////////////////////////////////////////////////////////////////////////////////////////////////

comando_else_fim    =: {CHAVE_ABRE}comando{CHAVE_FECHA} //////////////////////////////////////////////////////////////////////////////////

comando_else_fim    =: {if}comando_if_else  //////////////////////////////////////////////////////////////////////////////////////////////
                    | {ELSE}{CHAVE_ABRE}comando{CHAVE_FECHA}    //////////////////////////////////////////////////////////////////////////

comando             =: {PRINTF}chamada_printf   //////////////////////////////////////////////////////////////////////////////////////////
                    | {TIPO}declaracao_local    //////////////////////////////////////////////////////////////////////////////////////////
                    | {IDENTIFICADOR}comando_identificador  //////////////////////////////////////////////////////////////////////////////
                    | {IF}comando_if    //////////////////////////////////////////////////////////////////////////////////////////////////
                    | {WHILE}comando_while  //////////////////////////////////////////////////////////////////////////////////////////////
                    | {FOR}comando_for
                    | {SWITCH}comando_switch    //////////////////////////////////////////////////////////////////////////////////////////
                    | {RETURN}comando_return    //////////////////////////////////////////////////////////////////////////////////////////
                    | {BREAK}{FIM_COMANDO}  //////////////////////////////////////////////////////////////////////////////////////////////
                    | {CONTINUE}{FIM_COMANDO}   //////////////////////////////////////////////////////////////////////////////////////////
                    | bloco_comandos{PRINTF}chamada_printf  //////////////////////////////////////////////////////////////////////////////

comando_while       =: {PARENTESE_ABRE}condicao{PARENTESE_FECHA}comando //////////////////////////////////////////////////////////////////

comando_for         =: {PARENTESE_ABRE}inicializacao_for{FIM_COMANDO}condicao{FIM_COMANDO}incremento_for{PARENTESE_FECHA}comando //////// 

inicializacao_for   =: {TIPO}{IDENTIFICADOR}{ATRIBUICAO}expressao   //////////////////////////////////////////////////////////////////////
                    | {IDENTIFICADOR}{ATRIBUICAO}expressao  //////////////////////////////////////////////////////////////////////////////

incremento_for      =: {IDENTIFICADOR}{ATRIBUICAO}expressao //////////////////////////////////////////////////////////////////////////////

comando_switch      =: {PARENTESE_ABRE}expressao{PARENTESE_FECHA}{CHAVE_ABRE}lista_cases{CHAVE_FECHA}   //////////////////////////////////

lista_cases         =: {CASE}comando_case lista_cases   //////////////////////////////////////////////////////////////////////////////////
                    | {DEFAULT}comando_default  //////////////////////////////////////////////////////////////////////////////////////////

comando_case        =: valor{LABELCOLON}bloco_comandos_case //////////////////////////////////////////////////////////////////////////////

comando_default     =: {LABELCOLON}bloco_comandos_case  //////////////////////////////////////////////////////////////////////////////////

bloco_comandos_case =: {TIPO}declaracao_local bloco_comandos_case   //////////////////////////////////////////////////////////////////////
                    | {IDENTIFICADOR}comando_identificador bloco_comandos_case  //////////////////////////////////////////////////////////
                    | {IF}comando_if bloco_comandos_case    //////////////////////////////////////////////////////////////////////////////
                    | {WHILE}comando_while bloco_comandos_case  //////////////////////////////////////////////////////////////////////////
                    | {FOR}comando_for bloco_comandos_case  //////////////////////////////////////////////////////////////////////////////
                    | {RETURN}comando_return bloco_comandos_case    //////////////////////////////////////////////////////////////////////
                    | {BREAK}{FIM_COMANDO}bloco_comandos_case   //////////////////////////////////////////////////////////////////////////
                    | {CONTINUE}{FIM_COMANDO}bloco_comandos_case    //////////////////////////////////////////////////////////////////////
                    | {PRINTF}chamada_printf bloco_comandos_case    //////////////////////////////////////////////////////////////////////

comando_return      =: expressao_return{FIM_COMANDO}   ////////////////////////////////////////////////////////////////////////////////// 

expressao_return    =: {NUMERO}expressao_rest   //////////////////////////////////////////////////////////////////////////////////////////
                    | {STRING}  //////////////////////////////////////////////////////////////////////////////////////////////////////////
                    | {CARACTERE}   //////////////////////////////////////////////////////////////////////////////////////////////////////
                    | {IDENTIFICADOR}expressao_id_return    //////////////////////////////////////////////////////////////////////////////
                    | {PARENTESE_ABRE}expressao{PARENTESE_FECHA}expressao_rest  //////////////////////////////////////////////////////////

expressao_id_return =: {COLCHETE_ABRE}expressao{COLCHETE_FECHA}expressao_rest   //////////////////////////////////////////////////////////
                    | {PARENTESE_ABRE}argumentos expressao_rest //////////////////////////////////////////////////////////////////////////
                    | expressao_rest    //////////////////////////////////////////////////////////////////////////////////////////////////

// Chamada printf
chamada_printf      =: {PARENTESE_ABRE}argumentos{FIM_COMANDO}  //////////////////////////////////////////////////////////////////////////

// Condicoes
condicao            =: expressao condicao_rest  //////////////////////////////////////////////////////////////////////////////////////////
condicao_rest       =: {OPERADOR_REL}expressao  //////////////////////////////////////////////////////////////////////////////////////////


